# 三人聚智工具 使用说明

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 开发环境运行
```bash
npm start
# 或者带调试模式
npm run dev
```

### 打包应用
```bash
# Windows版本
npm run build-win

# macOS版本
npm run build-mac

# Linux版本
npm run build-linux

# 所有平台
npm run build
```

### 清理项目
如需清理项目中的临时文件和构建产物：
```bash
npm run clean
```

### 完整重建
如果遇到问题，可以完整重建项目：
```bash
npm run rebuild
```

## ✨ 主要功能

### 1. 系统托盘功能
- **应用启动后自动隐藏到系统托盘**
- **双击托盘图标** - 重新打开主窗口
- **右键托盘图标** - 显示快捷菜单
- **关闭主窗口** - 隐藏到托盘（不退出应用）

### 2. 搜索浮窗
- **快捷键：`Ctrl + Space`** - 打开搜索浮窗
- **智能定位** - 浮窗会在鼠标附近显示
- **失焦隐藏** - 点击其他地方自动隐藏
- **钉住功能** - 按 `Ctrl + D` 钉住浮窗

### 3. 超级面板（新功能）
- **快捷键：`Ctrl + Alt + P`** - 打开超级面板
- **快速访问** - 一键执行常用功能
- **插件集成** - 所有插件功能均可添加到超级面板
- **自定义排列** - 支持拖拽和个性化排列
- **分类管理** - 按功能类型自动分类

#### 超级面板功能类型
- **密码生成**：简单密码、强密码、超强密码
- **时间工具**：当前时间、时间戳、UUID生成
- **系统工具**：计算器、记事本、文件管理
- **插件功能**：文本片段、AI助手、密码管理等

#### 如何使用超级面板
1. **添加功能**：在超级面板管理器中选择需要的功能
2. **移除功能**：点击功能卡片上的删除按钮
3. **重新排列**：拖拽功能卡片调整顺序
4. **快速执行**：点击功能图标即可执行

### 4. 插件系统
- **插件管理** - 支持加载和运行JavaScript插件
- **文本片段助手** - 快速插入常用文本
- **AI助手** - 智能对话和文本分析
- **密码管理器** - 安全的密码存储和生成
- **下载管理器** - 文件下载和管理工具
- **插件超级面板集成** - 所有插件功能都能添加到超级面板

### 5. 智能自动化
- **自动粘贴** - 选中的文本片段自动粘贴到当前活动窗口
- **焦点管理** - 自动恢复到原来的应用程序
- **剪贴板同步** - 无缝的剪贴板操作体验

## ⚙️ 配置选项

### 快捷键设置
- **全局快捷键**：默认 `Ctrl + Space`（可在设置中修改）
- **钉住快捷键**：默认 `Ctrl + D`（可在设置中修改）
- **超级面板快捷键**：默认 `Ctrl + Alt + P`（可在设置中修改）

### 开机自启动
- 可在设置中开启/关闭开机自启动功能

### 插件数据存储
- 支持自定义插件数据存储路径
- 默认存储在用户数据目录下的 `plugin-data` 文件夹

### 右键长按面板
- **启用/禁用**：可在设置中开启或关闭右键长按显示超级面板功能
- **延迟时间**：可调整右键长按的触发延迟时间（默认500毫秒）

## 🔌 插件开发

### 插件结构
```
sanrenjz-tools-插件名/
├── plugin.json          # 插件配置文件
├── index.html           # 主界面文件
├── preload.js          # 预加载脚本
├── logo.ico            # 插件图标
└── README.md           # 说明文档
```

### 插件配置示例
```json
{
  "pluginName": "插件名称",
  "description": "插件描述",
  "version": "1.0.0",
  "author": "作者",
  "main": "index.html",
  "logo": "logo.ico",
  "preload": "preload.js",
  "features": [
    {
      "code": "feature-code",
      "explain": "功能说明",
      "cmds": ["搜索关键词"],
      "icon": "logo.ico",
      "superPanel": true,
      "category": "工具类别"
    }
  ],
  "pluginSetting": {
    "width": 1000,
    "height": 680,
    "single": true
  }
}
```

### 超级面板集成
插件功能可以通过以下方式集成到超级面板：

1. **在 plugin.json 中配置**：
   - 设置 `superPanel: true`
   - 指定 `category` 分类
   - 设置 `priority` 优先级

2. **功能导出**：
   - 在 preload.js 中导出功能函数
   - 支持异步操作和回调

3. **图标支持**：
   - 支持 .ico 文件
   - 支持 emoji 图标
   - 支持 base64 图片

## 🛠 开发调试

### 开发者工具
- **主窗口调试**：按 `F12` 打开开发者工具
- **搜索窗口调试**：在搜索窗口中按 `F12`
- **超级面板调试**：在超级面板中按 `F12`

### 插件热重载
- 修改插件文件后，在主界面点击"重新加载插件"按钮
- 或者重启应用程序

### 日志查看
- 应用日志会输出到控制台
- 插件错误会在开发者工具中显示

## 📁 目录结构

```
sanrenjz-tools/
├── main.js                     # 主进程文件
├── index.html                  # 主界面
├── search-window.html           # 搜索窗口
├── super-panel.html             # 超级面板
├── package.json                 # 项目配置
├── app/
│   ├── software_manager.js     # 插件管理器
│   └── software/               # 插件目录
│       ├── sanrenjz-tools-text/         # 文本片段插件
│       ├── sanrenjz.tools-ai/           # AI助手插件
│       ├── sanrenjz-tools-password/     # 密码管理插件
│       └── sanrenjz-tools-download_plugin/ # 下载管理插件
└── build/                      # 构建配置
    ├── icon.ico               # Windows图标
    ├── icon.icns              # macOS图标
    └── icon.png               # Linux图标
```

## 🔧 故障排除

### 常见问题

1. **应用无法启动**
   - 检查 Node.js 版本是否符合要求
   - 运行 `npm install` 重新安装依赖
   - 检查是否有其他实例正在运行

2. **快捷键不生效**
   - 检查是否有其他应用占用了相同快捷键
   - 在设置中修改为其他快捷键组合
   - 重启应用程序

3. **插件加载失败**
   - 检查插件目录结构是否正确
   - 验证 plugin.json 格式是否正确
   - 查看控制台错误信息

4. **超级面板不显示**
   - 检查快捷键设置
   - 确认超级面板功能已启用
   - 重新加载插件

### 重置应用
如果遇到严重问题，可以重置应用：

1. 关闭应用程序
2. 删除用户数据目录中的配置文件
3. 运行 `npm run clean`
4. 重新启动应用

## 📞 技术支持

- **GitHub Issues**：https://github.com/yuhanbo758/sanrenjz-tools/issues
- **邮箱支持**：yuhanbo758@sanrenjz.com
- **开发文档**：查看项目 README.md

## 📄 许可证

本项目采用 MIT 许可证，详情请查看 LICENSE 文件。